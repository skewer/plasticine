package plasticine.arch
import chisel3._
import chisel3.util._
import scala.collection.mutable.ListBuffer

trait PlasticineArch0{
  self:PlasticineArch with Plasticine =>
  cus(0)(0) = Module(new PMU(MyPMUParams(4, 4, 4, 4, 8, 4)))
  cus(0)(1) = Module(new PCU(MyPCUParams(4, 4, 4, 4, 8, 4)))
  cus(1)(0) = Module(new PCU(MyPCUParams(4, 4, 4, 4, 8, 4)))
  cus(1)(1) = Module(new PMU(MyPMUParams(4, 4, 4, 4, 8, 4)))
  vsbs(0)(0) = Module(new VectorSwitch(VectorSwitchParams(numIns=9, numOuts=9, v=16, w=32)))
  ssbs(0)(0) = Module(new ScalarSwitch(ScalarSwitchParams(numIns=12, numOuts=14, w=32)))
  csbs(0)(0) = Module(new ControlSwitch(ControlSwitchParams(numIns=13, numOuts=19)))
  vsbs(0)(1) = Module(new VectorSwitch(VectorSwitchParams(numIns=14, numOuts=14, v=16, w=32)))
  ssbs(0)(1) = Module(new ScalarSwitch(ScalarSwitchParams(numIns=16, numOuts=18, w=32)))
  csbs(0)(1) = Module(new ControlSwitch(ControlSwitchParams(numIns=17, numOuts=24)))
  vsbs(0)(2) = Module(new VectorSwitch(VectorSwitchParams(numIns=9, numOuts=9, v=16, w=32)))
  ssbs(0)(2) = Module(new ScalarSwitch(ScalarSwitchParams(numIns=12, numOuts=14, w=32)))
  csbs(0)(2) = Module(new ControlSwitch(ControlSwitchParams(numIns=13, numOuts=19)))
  vsbs(1)(0) = Module(new VectorSwitch(VectorSwitchParams(numIns=14, numOuts=14, v=16, w=32)))
  ssbs(1)(0) = Module(new ScalarSwitch(ScalarSwitchParams(numIns=17, numOuts=19, w=32)))
  csbs(1)(0) = Module(new ControlSwitch(ControlSwitchParams(numIns=18, numOuts=25)))
  vsbs(1)(1) = Module(new VectorSwitch(VectorSwitchParams(numIns=20, numOuts=20, v=16, w=32)))
  ssbs(1)(1) = Module(new ScalarSwitch(ScalarSwitchParams(numIns=22, numOuts=24, w=32)))
  csbs(1)(1) = Module(new ControlSwitch(ControlSwitchParams(numIns=23, numOuts=32)))
  vsbs(1)(2) = Module(new VectorSwitch(VectorSwitchParams(numIns=14, numOuts=14, v=16, w=32)))
  ssbs(1)(2) = Module(new ScalarSwitch(ScalarSwitchParams(numIns=17, numOuts=19, w=32)))
  csbs(1)(2) = Module(new ControlSwitch(ControlSwitchParams(numIns=18, numOuts=25)))
  vsbs(2)(0) = Module(new VectorSwitch(VectorSwitchParams(numIns=9, numOuts=9, v=16, w=32)))
  ssbs(2)(0) = Module(new ScalarSwitch(ScalarSwitchParams(numIns=12, numOuts=14, w=32)))
  csbs(2)(0) = Module(new ControlSwitch(ControlSwitchParams(numIns=13, numOuts=19)))
  vsbs(2)(1) = Module(new VectorSwitch(VectorSwitchParams(numIns=14, numOuts=14, v=16, w=32)))
  ssbs(2)(1) = Module(new ScalarSwitch(ScalarSwitchParams(numIns=16, numOuts=18, w=32)))
  csbs(2)(1) = Module(new ControlSwitch(ControlSwitchParams(numIns=17, numOuts=24)))
  vsbs(2)(2) = Module(new VectorSwitch(VectorSwitchParams(numIns=9, numOuts=9, v=16, w=32)))
  ssbs(2)(2) = Module(new ScalarSwitch(ScalarSwitchParams(numIns=12, numOuts=14, w=32)))
  csbs(2)(2) = Module(new ControlSwitch(ControlSwitchParams(numIns=13, numOuts=19)))
  // VectorNetwork Connection
  cus(0)(0).io.vecOut(0) <> vsbs(0)(1).io.ins(9)
  cus(0)(0).io.vecOut(1) <> vsbs(1)(1).io.ins(19)
  cus(0)(0).io.vecOut(2) <> vsbs(1)(0).io.ins(4)
  cus(0)(0).io.vecOut(3) <> vsbs(0)(0).io.ins(4)
  cus(1)(1).io.vecOut(0) <> vsbs(1)(2).io.ins(8)
  cus(1)(1).io.vecOut(1) <> vsbs(2)(2).io.ins(8)
  cus(1)(1).io.vecOut(2) <> vsbs(2)(1).io.ins(4)
  cus(1)(1).io.vecOut(3) <> vsbs(1)(1).io.ins(9)
  cus(0)(1).io.vecOut(0) <> vsbs(0)(2).io.ins(4)
  cus(0)(1).io.vecOut(1) <> vsbs(1)(2).io.ins(13)
  cus(0)(1).io.vecOut(2) <> vsbs(1)(1).io.ins(4)
  cus(0)(1).io.vecOut(3) <> vsbs(0)(1).io.ins(4)
  cus(1)(0).io.vecOut(0) <> vsbs(1)(1).io.ins(14)
  cus(1)(0).io.vecOut(1) <> vsbs(2)(1).io.ins(13)
  cus(1)(0).io.vecOut(2) <> vsbs(2)(0).io.ins(4)
  cus(1)(0).io.vecOut(3) <> vsbs(1)(0).io.ins(9)
  vsbs(0)(0).io.outs(0) <> vsbs(0)(1).io.ins(10)
  vsbs(0)(0).io.outs(1) <> vsbs(0)(1).io.ins(11)
}
